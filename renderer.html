<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self'; style-src 'self' 'unsafe-inline'">
    <title>Notepad</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Titlebar with traffic lights space and menu -->
    <div class="titlebar">
        <div class="titlebar-drag"></div>
        <div class="menu-bar">
            <div class="menu-item" data-menu="archivo">
                <span class="menu-label">Archivo</span>
                <div class="menu-dropdown" id="menu-archivo">
                    <div class="menu-option" data-action="new">Nuevo <span class="shortcut">âŒ˜N</span></div>
                    <div class="menu-option" data-action="new-tab">Nueva pestaÃ±a <span class="shortcut">âŒ˜T</span></div>
                    <div class="menu-separator"></div>
                    <div class="menu-option" data-action="open">Abrir... <span class="shortcut">âŒ˜O</span></div>
                    <div class="menu-submenu-container">
                        <div class="menu-option has-submenu">ğŸ“Œ Fijados</div>
                        <div class="menu-submenu" id="pinned-submenu">
                            <div class="menu-empty">No hay archivos fijados</div>
                        </div>
                    </div>
                    <div class="menu-submenu-container">
                        <div class="menu-option has-submenu">Recientes</div>
                        <div class="menu-submenu" id="recent-submenu">
                            <div class="menu-empty">No hay archivos recientes</div>
                        </div>
                    </div>
                    <div class="menu-separator"></div>
                    <div class="menu-option" data-action="save">Guardar <span class="shortcut">âŒ˜G</span></div>
                    <div class="menu-option" data-action="save-as">Guardar como... <span class="shortcut">â‡§âŒ˜G</span></div>
                    <div class="menu-separator"></div>
                    <div class="menu-option" data-action="pin-current">ğŸ“Œ Fijar archivo actual</div>
                    <div class="menu-option" data-action="show-in-folder">Mostrar en Finder</div>
                    <div class="menu-separator"></div>
                    <div class="menu-option" data-action="close-tab">Cerrar pestaÃ±a <span class="shortcut">âŒ˜W</span></div>
                </div>
            </div>
            <div class="menu-item" data-menu="editar">
                <span class="menu-label">Editar</span>
                <div class="menu-dropdown" id="menu-editar">
                    <div class="menu-option" data-action="undo">Deshacer <span class="shortcut">âŒ˜Z</span></div>
                    <div class="menu-option" data-action="redo">Rehacer <span class="shortcut">â‡§âŒ˜Z</span></div>
                    <div class="menu-separator"></div>
                    <div class="menu-option" data-action="cut">Cortar <span class="shortcut">âŒ˜X</span></div>
                    <div class="menu-option" data-action="copy">Copiar <span class="shortcut">âŒ˜C</span></div>
                    <div class="menu-option" data-action="paste">Pegar <span class="shortcut">âŒ˜V</span></div>
                    <div class="menu-option" data-action="select-all">Seleccionar todo <span class="shortcut">âŒ˜A</span></div>
                    <div class="menu-separator"></div>
                    <div class="menu-option" data-action="find">Buscar... <span class="shortcut">âŒ˜F</span></div>
                    <div class="menu-option" data-action="replace">Reemplazar... <span class="shortcut">âŒ˜H</span></div>
                </div>
            </div>
            <div class="menu-item" data-menu="formato">
                <span class="menu-label">Formato</span>
                <div class="menu-dropdown" id="menu-formato">
                    <div class="menu-option" data-action="bold">Negrita <span class="shortcut">âŒ˜B</span></div>
                    <div class="menu-option" data-action="underline">Subrayado <span class="shortcut">âŒ˜U</span></div>
                    <div class="menu-option" data-action="italic">Cursiva <span class="shortcut">âŒ˜I</span></div>
                    <div class="menu-separator"></div>
                    <div class="menu-option" data-action="text-color">Color de texto...</div>
                    <div class="menu-separator"></div>
                    <div class="menu-option" data-action="clear-format">Limpiar formato <span class="shortcut">âŒ˜\</span></div>
                </div>
            </div>
            <div class="menu-item" data-menu="historial">
                <span class="menu-label">Historial</span>
                <div class="menu-dropdown" id="menu-historial">
                    <div class="menu-option" data-action="show-history">Ver historial <span class="shortcut">âŒ˜Y</span></div>
                    <div class="menu-option" data-action="export-history">Exportar historial</div>
                    <div class="menu-separator"></div>
                    <div class="menu-option" data-action="clear-history">Limpiar historial</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Format Toolbar -->
    <div class="format-toolbar" id="format-toolbar">
        <div class="toolbar-group">
            <button class="toolbar-btn" id="btn-bold" title="Negrita (âŒ˜B)">
                <strong>B</strong>
            </button>
            <button class="toolbar-btn" id="btn-italic" title="Cursiva (âŒ˜I)">
                <em>I</em>
            </button>
            <button class="toolbar-btn" id="btn-underline" title="Subrayado (âŒ˜U)">
                <u>U</u>
            </button>
        </div>
        <div class="toolbar-separator"></div>
        <div class="toolbar-group">
            <label class="toolbar-color" title="Color de texto">
                <span class="color-icon">A</span>
                <input type="color" id="text-color-picker" value="#000000">
                <span class="color-indicator" id="color-indicator"></span>
            </label>
        </div>
        <div class="toolbar-separator"></div>
        <div class="toolbar-group">
            <button class="toolbar-btn" id="btn-clear-format" title="Limpiar formato (âŒ˜\)">
                âŒ€
            </button>
        </div>
    </div>

    <div class="tab-bar">
        <div class="tabs-container" id="tabs-container"></div>
        <div class="new-tab-btn" id="new-tab-btn" title="Nueva pestaÃ±a (âŒ˜T)">+</div>
    </div>

    <div class="editor-container" id="editor-container"></div>

    <div class="status-bar">
        <div class="status-left">
            <div class="status-item">
                <span class="status-label">LÃ­neas:</span>
                <span id="line-count">1</span>
            </div>
            <div class="status-item">
                <span class="status-label">Palabras:</span>
                <span id="word-count">0</span>
            </div>
            <div class="status-item">
                <span class="status-label">Caracteres:</span>
                <span id="char-count">0</span>
            </div>
        </div>
        <div class="status-right">
            <span class="autosave-indicator" id="autosave-status">âœ“ Guardado</span>
            <span class="modified-indicator" id="modified">â— Modificado</span>
        </div>
    </div>

    <!-- History Panel -->
    <div class="history-panel" id="history-panel">
        <div class="history-header">
            <h3>Historial de cambios</h3>
            <span class="history-close" id="history-close">Ã—</span>
        </div>
        <div class="history-list" id="history-list"></div>
        <div class="history-actions">
            <button class="history-btn secondary" id="history-cancel">Cancelar</button>
            <button class="history-btn primary" id="history-restore">Restaurar</button>
        </div>
    </div>

    <!-- Toast -->
    <div class="toast" id="toast"></div>

    <script src="renderer.js"></script>
</body>
</html>
